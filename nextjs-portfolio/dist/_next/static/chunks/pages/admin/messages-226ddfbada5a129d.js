(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[60],{8598:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/messages",function(){return r(5919)}])},4402:function(e,t,r){"use strict";r.d(t,{l:function(){return c}});var a=r(5893);r(7294);var s=r(1664),n=r.n(s),i=r(1163),o=r(9964),c=e=>{let{children:t}=e,r=(0,i.useRouter)(),s=async()=>{await (0,o.kS)(),r.push("/admin/login")};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-64 bg-black/40 backdrop-blur-sm border-r border-white/10 min-h-screen",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-8",children:"Admin Panel"}),(0,a.jsx)("nav",{className:"space-y-2",children:[{name:"Dashboard",href:"/admin",icon:"\uD83D\uDCCA"},{name:"Projects",href:"/admin/projects",icon:"\uD83D\uDCC1"},{name:"Testimonials",href:"/admin/testimonials",icon:"⭐"},{name:"Profile",href:"/admin/profile",icon:"\uD83D\uDC64"},{name:"Messages",href:"/admin/messages",icon:"\uD83D\uDCAC"},{name:"Settings",href:"/admin/settings",icon:"⚙️"}].map(e=>(0,a.jsxs)(n(),{href:e.href,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(r.pathname===e.href?"bg-blue-500/20 text-blue-300":"text-gray-300 hover:bg-white/10 hover:text-white"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsx)("span",{children:e.name})]},e.name))}),(0,a.jsxs)("div",{className:"mt-8 pt-8 border-t border-white/10",children:[(0,a.jsxs)("a",{href:"/",target:"_blank",className:"flex items-center space-x-3 px-4 py-3 text-gray-300 hover:bg-white/10 hover:text-white rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83C\uDF10"}),(0,a.jsx)("span",{children:"View Site"})]}),(0,a.jsxs)("button",{onClick:s,className:"flex items-center space-x-3 px-4 py-3 text-gray-300 hover:bg-red-500/20 hover:text-red-300 rounded-lg transition-colors w-full text-left",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDEAA"}),(0,a.jsx)("span",{children:"Logout"})]})]})]})}),(0,a.jsx)("div",{className:"flex-1 p-8",children:t})]})})}},8536:function(e,t,r){"use strict";r.d(t,{d:function(){return s}});var a=r(4805);let s={async createProject(e){try{let{data:{user:t},error:r}=await a.OQ.auth.getUser();if(r)throw console.error("Authentication error:",r),Error("Authentication failed: ".concat(r.message));if(!t)throw Error("Authentication required to create projects - no user found");console.log("Creating project with authenticated user:",t.id);let{data:s,error:n}=await a.OQ.from("projects").insert([{...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(n)throw console.error("Supabase error details:",{message:n.message,details:n.details,hint:n.hint,code:n.code}),Error("Database error: ".concat(n.message).concat(n.details?" (Details: ".concat(n.details,")"):"").concat(n.hint?" (Hint: ".concat(n.hint,")"):""));return console.log("Project created successfully:",s),s}catch(e){throw console.error("Full error object in createProject:",e),Error(e instanceof Error?e.message:JSON.stringify(e))}},async updateProject(e,t){try{let{data:{user:r},error:s}=await a.OQ.auth.getUser();if(s)throw console.error("Authentication error:",s),Error("Authentication failed: ".concat(s.message));if(!r)throw Error("Authentication required to update projects - no user found");let{data:n,error:i}=await a.OQ.from("projects").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw console.error("Supabase error details:",{message:i.message,details:i.details,hint:i.hint,code:i.code}),Error("Database error: ".concat(i.message).concat(i.details?" (Details: ".concat(i.details,")"):"").concat(i.hint?" (Hint: ".concat(i.hint,")"):""));return n}catch(e){throw console.error("Full error object in updateProject:",e),Error(e instanceof Error?e.message:JSON.stringify(e))}},async deleteProject(e){try{let{data:{user:t},error:r}=await a.OQ.auth.getUser();if(r)throw console.error("Authentication error:",r),Error("Authentication failed: ".concat(r.message));if(!t)throw Error("Authentication required to delete projects - no user found");let{error:s}=await a.OQ.from("projects").delete().eq("id",e);if(s)throw console.error("Supabase error details:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),Error("Database error: ".concat(s.message).concat(s.details?" (Details: ".concat(s.details,")"):"").concat(s.hint?" (Hint: ".concat(s.hint,")"):""))}catch(e){throw console.error("Full error object in deleteProject:",e),Error(e instanceof Error?e.message:JSON.stringify(e))}},async createTestimonial(e){let{data:t,error:r}=await a.OQ.from("testimonials").insert([{author:e.author,role:e.role,message:e.message,rating:e.rating,avatar_url:e.avatar_url}]).select().single();if(r)throw r;return t},async updateTestimonial(e,t){let{data:r,error:s}=await a.OQ.from("testimonials").update({author:t.author,role:t.role,message:t.message,rating:t.rating,avatar_url:t.avatar_url,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return r},async deleteTestimonial(e){let{error:t}=await a.OQ.from("testimonials").delete().eq("id",e);if(t)throw t},async updatePersonalInfo(e){let{name:t,title:r,email:s,phone:n,location:i,bio:o,profile_image_url:c}=e,{data:l}=await a.OQ.from("personal_info").select("id").limit(1).single();if(l){let{data:e,error:d}=await a.OQ.from("personal_info").update({name:t,title:r,email:s,phone:n,location:i,bio:o,profile_image_url:c,updated_at:new Date().toISOString()}).eq("id",l.id).select().single();if(d)throw d;return e}{let{data:e,error:l}=await a.OQ.from("personal_info").insert({name:t,title:r,email:s,phone:n,location:i,bio:o,profile_image_url:c}).select().single();if(l)throw l;return e}},async updateSocialLinks(e){try{await a.OQ.from("social_links").delete().neq("platform","");let t=e.filter(e=>""!==e.url.trim()).map(e=>{let{platform:t,url:r,is_visible:a}=e;return{platform:t,url:r,is_visible:a}});if(0===t.length)return[];let{data:r,error:s}=await a.OQ.from("social_links").insert(t).select();if(s)throw s;return r||[]}catch(e){throw console.error("Error updating social links:",e),e}},async getContactMessages(){let{data:e,error:t}=await a.OQ.from("contact_messages").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async markMessageAsRead(e){let{error:t}=await a.OQ.from("contact_messages").update({is_read:!0}).eq("id",e);if(t)throw t},async deleteMessage(e){let{error:t}=await a.OQ.from("contact_messages").delete().eq("id",e);if(t)throw t}}},9964:function(e,t,r){"use strict";r.d(t,{$8:function(){return i},kS:function(){return o},oM:function(){return c},v9:function(){return n}});var a=r(4805);let s="@Phenomenal1Sensational2",n=async e=>{if(e!==s)return!1;try{let{data:e,error:t}=await a.OQ.auth.signInWithPassword({email:"admin@ephraimumunnakwe.com",password:s});if(t)throw t;return!!e.user}catch(e){return console.error("Authentication error:",e),!1}},i=async()=>{try{let{data:{user:e},error:t}=await a.OQ.auth.getUser();if(console.log("Auth check:",{user:!!e,error:t}),t)return console.error("Auth error:",t),!1;return!!e}catch(e){return console.error("Auth check failed:",e),!1}},o=async()=>{try{await a.OQ.auth.signOut()}catch(e){console.error("Logout error:",e)}},c=()=>{try{let e=localStorage.getItem("sb-cecsvrwibdvncrxbbctr-auth-token");return null!==e}catch(e){return!1}}},5919:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var a=r(5893),s=r(7294),n=r(1163),i=r(9964),o=r(4402),c=r(8536);function l(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[d,h]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),g=(0,n.useRouter)();(0,s.useEffect)(()=>{m(!0)},[]),(0,s.useEffect)(()=>{if(u){if(!(0,i.$8)()){g.push("/admin/login");return}x()}},[g,u]);let x=async()=>{l(!0);try{let e=await c.d.getContactMessages();t(e)}catch(e){console.error("Error loading messages:",e)}l(!1)},f=async r=>{try{await c.d.markMessageAsRead(r),t(e.map(e=>e.id===r?{...e,is_read:!0}:e))}catch(e){console.error("Error marking message as read:",e)}},p=async r=>{if(confirm("Are you sure you want to delete this message?"))try{await c.d.deleteMessage(r),t(e.filter(e=>e.id!==r)),(null==d?void 0:d.id)===r&&h(null)}catch(e){console.error("Error deleting message:",e)}},w=e.filter(e=>!e.is_read).length;return u&&(0,i.$8)()?(0,a.jsxs)(o.l,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2",children:["Messages ",w>0&&(0,a.jsxs)("span",{className:"text-red-400",children:["(",w," unread)"]})]}),(0,a.jsx)("p",{className:"text-gray-300",children:"Contact form submissions from your portfolio"})]}),r?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"⏳"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Loading messages..."})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1 space-y-4",children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-gray-300",children:"No messages yet"})]}):e.map(e=>(0,a.jsxs)("div",{onClick:()=>{h(e),e.is_read||f(e.id)},className:"p-4 rounded-lg border cursor-pointer transition-all ".concat((null==d?void 0:d.id)===e.id?"bg-blue-500/20 border-blue-500/30":e.is_read?"bg-white/5 border-white/10 hover:bg-white/10":"bg-yellow-500/10 border-yellow-500/30 hover:bg-yellow-500/20"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"text-white font-semibold truncate",children:e.name}),!e.is_read&&(0,a.jsx)("span",{className:"w-2 h-2 bg-red-400 rounded-full"})]}),(0,a.jsx)("p",{className:"text-gray-300 text-sm truncate mb-2",children:e.subject}),(0,a.jsx)("p",{className:"text-gray-400 text-xs",children:new Date(e.created_at).toLocaleDateString()})]},e.id))}),(0,a.jsx)("div",{className:"lg:col-span-2",children:d?(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:d.subject}),(0,a.jsxs)("div",{className:"text-gray-300",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"From:"})," ",d.name]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",d.email]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Date:"})," ",new Date(d.created_at).toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("a",{href:"mailto:".concat(d.email,"?subject=Re: ").concat(d.subject),className:"bg-blue-500/20 text-blue-300 px-4 py-2 rounded-lg hover:bg-blue-500/30 transition-colors",children:"Reply"}),(0,a.jsx)("button",{onClick:()=>p(d.id),className:"bg-red-500/20 text-red-300 px-4 py-2 rounded-lg hover:bg-red-500/30 transition-colors",children:"Delete"})]})]}),(0,a.jsx)("div",{className:"bg-black/20 p-4 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:d.message})})]}):(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10 text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCAC"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Select a Message"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Choose a message from the list to view its details"})]})})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white",children:"Loading..."})})}}},function(e){e.O(0,[10,664,805,774,888,179],function(){return e(e.s=8598)}),_N_E=e.O()}]);