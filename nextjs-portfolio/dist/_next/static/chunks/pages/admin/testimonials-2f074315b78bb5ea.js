(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{5461:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/testimonials",function(){return r(1875)}])},4402:function(e,t,r){"use strict";r.d(t,{l:function(){return l}});var a=r(5893);r(7294);var s=r(1664),i=r.n(s),n=r(1163),o=r(9964),l=e=>{let{children:t}=e,r=(0,n.useRouter)(),s=async()=>{await (0,o.kS)(),r.push("/admin/login")};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-64 bg-black/40 backdrop-blur-sm border-r border-white/10 min-h-screen",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-8",children:"Admin Panel"}),(0,a.jsx)("nav",{className:"space-y-2",children:[{name:"Dashboard",href:"/admin",icon:"\uD83D\uDCCA"},{name:"Projects",href:"/admin/projects",icon:"\uD83D\uDCC1"},{name:"Testimonials",href:"/admin/testimonials",icon:"⭐"},{name:"Profile",href:"/admin/profile",icon:"\uD83D\uDC64"},{name:"Messages",href:"/admin/messages",icon:"\uD83D\uDCAC"},{name:"Settings",href:"/admin/settings",icon:"⚙️"}].map(e=>(0,a.jsxs)(i(),{href:e.href,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(r.pathname===e.href?"bg-blue-500/20 text-blue-300":"text-gray-300 hover:bg-white/10 hover:text-white"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsx)("span",{children:e.name})]},e.name))}),(0,a.jsxs)("div",{className:"mt-8 pt-8 border-t border-white/10",children:[(0,a.jsxs)("a",{href:"/",target:"_blank",className:"flex items-center space-x-3 px-4 py-3 text-gray-300 hover:bg-white/10 hover:text-white rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83C\uDF10"}),(0,a.jsx)("span",{children:"View Site"})]}),(0,a.jsxs)("button",{onClick:s,className:"flex items-center space-x-3 px-4 py-3 text-gray-300 hover:bg-red-500/20 hover:text-red-300 rounded-lg transition-colors w-full text-left",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDEAA"}),(0,a.jsx)("span",{children:"Logout"})]})]})]})}),(0,a.jsx)("div",{className:"flex-1 p-8",children:t})]})})}},8536:function(e,t,r){"use strict";r.d(t,{d:function(){return s}});var a=r(4805);let s={async createProject(e){try{let{data:{user:t},error:r}=await a.OQ.auth.getUser();if(r)throw console.error("Authentication error:",r),Error("Authentication failed: ".concat(r.message));if(!t)throw Error("Authentication required to create projects - no user found");console.log("Creating project with authenticated user:",t.id);let{data:s,error:i}=await a.OQ.from("projects").insert([{...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(i)throw console.error("Supabase error details:",{message:i.message,details:i.details,hint:i.hint,code:i.code}),Error("Database error: ".concat(i.message).concat(i.details?" (Details: ".concat(i.details,")"):"").concat(i.hint?" (Hint: ".concat(i.hint,")"):""));return console.log("Project created successfully:",s),s}catch(e){throw console.error("Full error object in createProject:",e),Error(e instanceof Error?e.message:JSON.stringify(e))}},async updateProject(e,t){try{let{data:{user:r},error:s}=await a.OQ.auth.getUser();if(s)throw console.error("Authentication error:",s),Error("Authentication failed: ".concat(s.message));if(!r)throw Error("Authentication required to update projects - no user found");let{data:i,error:n}=await a.OQ.from("projects").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw console.error("Supabase error details:",{message:n.message,details:n.details,hint:n.hint,code:n.code}),Error("Database error: ".concat(n.message).concat(n.details?" (Details: ".concat(n.details,")"):"").concat(n.hint?" (Hint: ".concat(n.hint,")"):""));return i}catch(e){throw console.error("Full error object in updateProject:",e),Error(e instanceof Error?e.message:JSON.stringify(e))}},async deleteProject(e){try{let{data:{user:t},error:r}=await a.OQ.auth.getUser();if(r)throw console.error("Authentication error:",r),Error("Authentication failed: ".concat(r.message));if(!t)throw Error("Authentication required to delete projects - no user found");let{error:s}=await a.OQ.from("projects").delete().eq("id",e);if(s)throw console.error("Supabase error details:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),Error("Database error: ".concat(s.message).concat(s.details?" (Details: ".concat(s.details,")"):"").concat(s.hint?" (Hint: ".concat(s.hint,")"):""))}catch(e){throw console.error("Full error object in deleteProject:",e),Error(e instanceof Error?e.message:JSON.stringify(e))}},async createTestimonial(e){let{data:t,error:r}=await a.OQ.from("testimonials").insert([{author:e.author,role:e.role,message:e.message,rating:e.rating,avatar_url:e.avatar_url}]).select().single();if(r)throw r;return t},async updateTestimonial(e,t){let{data:r,error:s}=await a.OQ.from("testimonials").update({author:t.author,role:t.role,message:t.message,rating:t.rating,avatar_url:t.avatar_url,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return r},async deleteTestimonial(e){let{error:t}=await a.OQ.from("testimonials").delete().eq("id",e);if(t)throw t},async updatePersonalInfo(e){let{name:t,title:r,email:s,phone:i,location:n,bio:o,profile_image_url:l}=e,{data:c}=await a.OQ.from("personal_info").select("id").limit(1).single();if(c){let{data:e,error:d}=await a.OQ.from("personal_info").update({name:t,title:r,email:s,phone:i,location:n,bio:o,profile_image_url:l,updated_at:new Date().toISOString()}).eq("id",c.id).select().single();if(d)throw d;return e}{let{data:e,error:c}=await a.OQ.from("personal_info").insert({name:t,title:r,email:s,phone:i,location:n,bio:o,profile_image_url:l}).select().single();if(c)throw c;return e}},async updateSocialLinks(e){try{await a.OQ.from("social_links").delete().neq("platform","");let t=e.filter(e=>""!==e.url.trim()).map(e=>{let{platform:t,url:r,is_visible:a}=e;return{platform:t,url:r,is_visible:a}});if(0===t.length)return[];let{data:r,error:s}=await a.OQ.from("social_links").insert(t).select();if(s)throw s;return r||[]}catch(e){throw console.error("Error updating social links:",e),e}},async getContactMessages(){let{data:e,error:t}=await a.OQ.from("contact_messages").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async markMessageAsRead(e){let{error:t}=await a.OQ.from("contact_messages").update({is_read:!0}).eq("id",e);if(t)throw t},async deleteMessage(e){let{error:t}=await a.OQ.from("contact_messages").delete().eq("id",e);if(t)throw t}}},9964:function(e,t,r){"use strict";r.d(t,{$8:function(){return n},kS:function(){return o},oM:function(){return l},v9:function(){return i}});var a=r(4805);let s="@Phenomenal1Sensational2",i=async e=>{if(e!==s)return!1;try{let{data:e,error:t}=await a.OQ.auth.signInWithPassword({email:"admin@ephraimumunnakwe.com",password:s});if(t)throw t;return!!e.user}catch(e){return console.error("Authentication error:",e),!1}},n=async()=>{try{let{data:{user:e},error:t}=await a.OQ.auth.getUser();if(console.log("Auth check:",{user:!!e,error:t}),t)return console.error("Auth error:",t),!1;return!!e}catch(e){return console.error("Auth check failed:",e),!1}},o=async()=>{try{await a.OQ.auth.signOut()}catch(e){console.error("Logout error:",e)}},l=()=>{try{let e=localStorage.getItem("sb-cecsvrwibdvncrxbbctr-auth-token");return null!==e}catch(e){return!1}}},1875:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(5893),s=r(7294),i=r(1163),n=r(9964),o=r(4402),l=r(4805),c=r(8536);function d(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),[h,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),[f,p]=(0,s.useState)(!1),w=(0,i.useRouter)();(0,s.useEffect)(()=>{p(!0)},[]),(0,s.useEffect)(()=>{f&&(async()=>{if(!await (0,n.$8)()){w.push("/admin/login");return}b()})()},[w,f]);let b=async()=>{d(!0);try{let e=await l.Ue.getTestimonials();t(e)}catch(e){console.error("Error loading testimonials:",e)}d(!1)},j=async r=>{if(confirm("Are you sure you want to delete this testimonial?"))try{await c.d.deleteTestimonial(r),t(e.filter(e=>e.id!==r))}catch(e){console.error("Error deleting testimonial:",e),alert("Failed to delete testimonial")}},v=e=>{g(e),m(!0)},y=async r=>{try{if(x){let a=await c.d.updateTestimonial(r.id,r);t(e.map(e=>e.id===r.id?a:e))}else{let a=await c.d.createTestimonial(r);t([...e,a])}m(!1),g(null)}catch(e){console.error("Error saving testimonial:",e),alert("Failed to save testimonial")}};return f&&(0,n.oM)()?(0,a.jsxs)(o.l,{children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Testimonials"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Manage client testimonials and reviews"})]}),(0,a.jsx)("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold",children:"Add Testimonial"})]}),r?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"⏳"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Loading testimonials..."})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold",children:e.author.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-white",children:e.author}),(0,a.jsx)("p",{className:"text-gray-400",children:e.role})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>v(e),className:"text-blue-400 hover:text-blue-300",children:"✏️"}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"text-red-400 hover:text-red-300",children:"\uD83D\uDDD1️"})]})]}),(0,a.jsxs)("p",{className:"text-gray-300 mb-4 italic",children:['"',e.message,'"']}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[[void 0,void 0,void 0,void 0,void 0].map((t,r)=>(0,a.jsx)("span",{className:"text-lg ".concat(r<e.rating?"text-yellow-400":"text-gray-600"),children:"⭐"},r)),(0,a.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",e.rating,")"]})]}),(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"})]})]},e.id))}),h&&(0,a.jsx)(u,{testimonial:x,onSave:y,onCancel:()=>{m(!1),g(null)}})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white",children:"Loading..."})})}function u(e){let{testimonial:t,onSave:r,onCancel:i}=e,[n,o]=(0,s.useState)(t||{author:"",role:"",message:"",rating:5,created_at:new Date().toISOString()});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-gray-900 p-8 rounded-lg max-w-2xl w-full",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:t?"Edit Testimonial":"Add Testimonial"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(n)},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Author Name"}),(0,a.jsx)("input",{type:"text",required:!0,value:n.author,onChange:e=>o({...n,author:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Role/Position"}),(0,a.jsx)("input",{type:"text",required:!0,value:n.role,onChange:e=>o({...n,role:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Message"}),(0,a.jsx)("textarea",{required:!0,rows:4,value:n.message,onChange:e=>o({...n,message:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3",placeholder:"What did they say about your work?"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Rating"}),(0,a.jsxs)("select",{value:n.rating,onChange:e=>o({...n,rating:Number(e.target.value)}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3",children:[(0,a.jsx)("option",{value:5,children:"5 Stars"}),(0,a.jsx)("option",{value:4,children:"4 Stars"}),(0,a.jsx)("option",{value:3,children:"3 Stars"}),(0,a.jsx)("option",{value:2,children:"2 Stars"}),(0,a.jsx)("option",{value:1,children:"1 Star"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Avatar URL (optional)"}),(0,a.jsx)("input",{type:"url",value:n.avatar_url||"",onChange:e=>o({...n,avatar_url:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3",placeholder:"https://example.com/avatar.jpg"})]}),(0,a.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,a.jsx)("button",{type:"submit",className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold",children:"Save Testimonial"}),(0,a.jsx)("button",{type:"button",onClick:i,className:"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-all font-semibold",children:"Cancel"})]})]})]})})}}},function(e){e.O(0,[10,664,805,774,888,179],function(){return e(e.s=5461)}),_N_E=e.O()}]);