(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[130],{8419:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/projects",function(){return r(1824)}])},4402:function(e,t,r){"use strict";r.d(t,{l:function(){return n}});var a=r(5893);r(7294);var s=r(1664),l=r.n(s),i=r(1163),o=r(9964),n=e=>{let{children:t}=e,r=(0,i.useRouter)(),s=async()=>{await (0,o.kS)(),r.push("/admin/login")};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"w-64 bg-black/40 backdrop-blur-sm border-r border-white/10 min-h-screen",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-8",children:"Admin Panel"}),(0,a.jsx)("nav",{className:"space-y-2",children:[{name:"Dashboard",href:"/admin",icon:"\uD83D\uDCCA"},{name:"Projects",href:"/admin/projects",icon:"\uD83D\uDCC1"},{name:"Testimonials",href:"/admin/testimonials",icon:"⭐"},{name:"Profile",href:"/admin/profile",icon:"\uD83D\uDC64"},{name:"Messages",href:"/admin/messages",icon:"\uD83D\uDCAC"},{name:"Settings",href:"/admin/settings",icon:"⚙️"}].map(e=>(0,a.jsxs)(l(),{href:e.href,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(r.pathname===e.href?"bg-blue-500/20 text-blue-300":"text-gray-300 hover:bg-white/10 hover:text-white"),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsx)("span",{children:e.name})]},e.name))}),(0,a.jsxs)("div",{className:"mt-8 pt-8 border-t border-white/10",children:[(0,a.jsxs)("a",{href:"/",target:"_blank",className:"flex items-center space-x-3 px-4 py-3 text-gray-300 hover:bg-white/10 hover:text-white rounded-lg transition-colors",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83C\uDF10"}),(0,a.jsx)("span",{children:"View Site"})]}),(0,a.jsxs)("button",{onClick:s,className:"flex items-center space-x-3 px-4 py-3 text-gray-300 hover:bg-red-500/20 hover:text-red-300 rounded-lg transition-colors w-full text-left",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDEAA"}),(0,a.jsx)("span",{children:"Logout"})]})]})]})}),(0,a.jsx)("div",{className:"flex-1 p-8",children:t})]})})}},8536:function(e,t,r){"use strict";r.d(t,{d:function(){return s}});var a=r(4805);let s={async createProject(e){try{let{data:{user:t},error:r}=await a.OQ.auth.getUser();if(r)throw console.error("Authentication error:",r),Error("Authentication failed: ".concat(r.message));if(!t)throw Error("Authentication required to create projects - no user found");console.log("Creating project with authenticated user:",t.id);let{data:s,error:l}=await a.OQ.from("projects").insert([{...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(l)throw console.error("Supabase error details:",{message:l.message,details:l.details,hint:l.hint,code:l.code}),Error("Database error: ".concat(l.message).concat(l.details?" (Details: ".concat(l.details,")"):"").concat(l.hint?" (Hint: ".concat(l.hint,")"):""));return console.log("Project created successfully:",s),s}catch(e){throw console.error("Full error object in createProject:",e),Error(e instanceof Error?e.message:JSON.stringify(e))}},async updateProject(e,t){try{let{data:{user:r},error:s}=await a.OQ.auth.getUser();if(s)throw console.error("Authentication error:",s),Error("Authentication failed: ".concat(s.message));if(!r)throw Error("Authentication required to update projects - no user found");let{data:l,error:i}=await a.OQ.from("projects").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw console.error("Supabase error details:",{message:i.message,details:i.details,hint:i.hint,code:i.code}),Error("Database error: ".concat(i.message).concat(i.details?" (Details: ".concat(i.details,")"):"").concat(i.hint?" (Hint: ".concat(i.hint,")"):""));return l}catch(e){throw console.error("Full error object in updateProject:",e),Error(e instanceof Error?e.message:JSON.stringify(e))}},async deleteProject(e){try{let{data:{user:t},error:r}=await a.OQ.auth.getUser();if(r)throw console.error("Authentication error:",r),Error("Authentication failed: ".concat(r.message));if(!t)throw Error("Authentication required to delete projects - no user found");let{error:s}=await a.OQ.from("projects").delete().eq("id",e);if(s)throw console.error("Supabase error details:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),Error("Database error: ".concat(s.message).concat(s.details?" (Details: ".concat(s.details,")"):"").concat(s.hint?" (Hint: ".concat(s.hint,")"):""))}catch(e){throw console.error("Full error object in deleteProject:",e),Error(e instanceof Error?e.message:JSON.stringify(e))}},async createTestimonial(e){let{data:t,error:r}=await a.OQ.from("testimonials").insert([{author:e.author,role:e.role,message:e.message,rating:e.rating,avatar_url:e.avatar_url}]).select().single();if(r)throw r;return t},async updateTestimonial(e,t){let{data:r,error:s}=await a.OQ.from("testimonials").update({author:t.author,role:t.role,message:t.message,rating:t.rating,avatar_url:t.avatar_url,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw s;return r},async deleteTestimonial(e){let{error:t}=await a.OQ.from("testimonials").delete().eq("id",e);if(t)throw t},async updatePersonalInfo(e){let{name:t,title:r,email:s,phone:l,location:i,bio:o,profile_image_url:n}=e,{data:c}=await a.OQ.from("personal_info").select("id").limit(1).single();if(c){let{data:e,error:d}=await a.OQ.from("personal_info").update({name:t,title:r,email:s,phone:l,location:i,bio:o,profile_image_url:n,updated_at:new Date().toISOString()}).eq("id",c.id).select().single();if(d)throw d;return e}{let{data:e,error:c}=await a.OQ.from("personal_info").insert({name:t,title:r,email:s,phone:l,location:i,bio:o,profile_image_url:n}).select().single();if(c)throw c;return e}},async updateSocialLinks(e){try{await a.OQ.from("social_links").delete().neq("platform","");let t=e.filter(e=>""!==e.url.trim()).map(e=>{let{platform:t,url:r,is_visible:a}=e;return{platform:t,url:r,is_visible:a}});if(0===t.length)return[];let{data:r,error:s}=await a.OQ.from("social_links").insert(t).select();if(s)throw s;return r||[]}catch(e){throw console.error("Error updating social links:",e),e}},async getContactMessages(){let{data:e,error:t}=await a.OQ.from("contact_messages").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async markMessageAsRead(e){let{error:t}=await a.OQ.from("contact_messages").update({is_read:!0}).eq("id",e);if(t)throw t},async deleteMessage(e){let{error:t}=await a.OQ.from("contact_messages").delete().eq("id",e);if(t)throw t}}},9964:function(e,t,r){"use strict";r.d(t,{$8:function(){return i},kS:function(){return o},oM:function(){return n},v9:function(){return l}});var a=r(4805);let s="@Phenomenal1Sensational2",l=async e=>{if(e!==s)return!1;try{let{data:e,error:t}=await a.OQ.auth.signInWithPassword({email:"admin@ephraimumunnakwe.com",password:s});if(t)throw t;return!!e.user}catch(e){return console.error("Authentication error:",e),!1}},i=async()=>{try{let{data:{user:e},error:t}=await a.OQ.auth.getUser();if(console.log("Auth check:",{user:!!e,error:t}),t)return console.error("Auth error:",t),!1;return!!e}catch(e){return console.error("Auth check failed:",e),!1}},o=async()=>{try{await a.OQ.auth.signOut()}catch(e){console.error("Logout error:",e)}},n=()=>{try{let e=localStorage.getItem("sb-cecsvrwibdvncrxbbctr-auth-token");return null!==e}catch(e){return!1}}},1824:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(5893),s=r(7294),l=r(1163),i=r(9964),o=r(4402),n=r(4805),c=r(8536);function d(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),[h,m]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),[x,f]=(0,s.useState)(!1),b=(0,l.useRouter)();(0,s.useEffect)(()=>{f(!0)},[]),(0,s.useEffect)(()=>{x&&(async()=>{if(!await (0,i.$8)()){b.push("/admin/login");return}w()})()},[b,x]);let w=async()=>{d(!0);try{let e=await n.Ue.getProjects();t(e),console.log("Successfully loaded ".concat(e.length," projects"));let r=await n.Ue.testStorageAccess();console.log("Storage bucket accessible:",r),r||(console.warn("Storage bucket may not be accessible. Image uploads might fail."),alert("Warning: Storage bucket access issue detected. Image uploads may fail. Please check your Supabase storage configuration."))}catch(r){console.error("Error loading projects:",r);let e=r instanceof Error?r.message:"Unknown error occurred",t="Failed to load projects";e.includes("Authentication required")?t="Authentication Error: Please log in again":e.includes("permission")&&(t="Permission Error: Database access denied"),alert("".concat(t,"\n\nDetailed Error: ").concat(e,"\n\nPlease refresh the page or contact support if the issue persists."))}d(!1)},j=async r=>{if(confirm("Are you sure you want to delete this project?"))try{let a=e.find(e=>e.id===r);if(null==a?void 0:a.preview_image)try{await n.Ue.deleteProjectImage(a.preview_image),console.log("Project image deleted successfully")}catch(e){console.warn("Failed to delete project image:",e)}await c.d.deleteProject(r),t(e.filter(e=>e.id!==r)),alert("Project deleted successfully!")}catch(r){console.error("Error deleting project:",r);let e=r instanceof Error?r.message:"Unknown error occurred",t="Failed to delete project";e.includes("Authentication required")?t="Authentication Error: Please make sure you're logged in as admin":e.includes("violates row-level security")?t="Database Security Error: RLS policies may not be properly configured":e.includes("foreign key")&&(t="Dependency Error: This project may be referenced by other data"),alert("".concat(t,"\n\nDetailed Error: ").concat(e))}},y=e=>{p(e),m(!0)},v=async r=>{try{if(g){let a=await c.d.updateProject(r.id,r);t(e.map(e=>e.id===r.id?a:e)),alert("Project updated successfully!")}else{let a=await c.d.createProject(r);t([...e,a]),alert("Project created successfully!")}m(!1),p(null)}catch(r){console.error("Error saving project:",r);let e=r instanceof Error?r.message:"Unknown error occurred",t=r instanceof Error&&r.stack?"\n\nError Details:\n".concat(r.stack):"";alert("Failed to save project!\n\nReason: ".concat(e).concat(t))}};return x&&(0,i.oM)()?(0,a.jsxs)(o.l,{children:[(0,a.jsxs)("div",{className:"mb-8 flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Projects"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Manage your portfolio projects"})]}),(0,a.jsx)("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold",children:"Add Project"})]}),r?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"⏳"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Loading projects..."})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg border border-white/10",children:[e.preview_image&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("img",{src:e.preview_image,alt:e.name,className:"w-full h-32 object-cover rounded-lg"})}),(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>y(e),className:"text-blue-400 hover:text-blue-300",children:"✏️"}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"text-red-400 hover:text-red-300",children:"\uD83D\uDDD1️"})]})]}),(0,a.jsx)("p",{className:"text-gray-300 mb-4",children:e.description}),(e.project_url||e.github_url)&&(0,a.jsxs)("div",{className:"flex space-x-2 mb-4",children:[e.project_url&&(0,a.jsx)("a",{href:e.project_url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-500/20 text-blue-300 px-2 py-1 rounded text-sm hover:bg-blue-500/30",children:"\uD83C\uDF10 Live"}),e.github_url&&(0,a.jsx)("a",{href:e.github_url,target:"_blank",rel:"noopener noreferrer",className:"bg-gray-500/20 text-gray-300 px-2 py-1 rounded text-sm hover:bg-gray-500/30",children:"\uD83D\uDCC1 Code"})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("Completed"===e.status?"bg-green-500/20 text-green-300":"In Progress"===e.status?"bg-yellow-500/20 text-yellow-300":"bg-blue-500/20 text-blue-300"),children:e.status})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Priority:"}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("High"===e.priority?"bg-red-500/20 text-red-300":"Medium"===e.priority?"bg-yellow-500/20 text-yellow-300":"bg-green-500/20 text-green-300"),children:e.priority})]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.technologies.map(e=>(0,a.jsx)("span",{className:"bg-blue-500/20 text-blue-300 px-2 py-1 rounded text-xs",children:e},e))})]},e.id))}),h&&(0,a.jsx)(u,{project:g,onSave:v,onCancel:()=>{m(!1),p(null)}})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-black to-gray-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-white",children:"Loading..."})})}function u(e){let{project:t,onSave:r,onCancel:l}=e,[i,o]=(0,s.useState)(t||{name:"",description:"",status:"Planning",priority:"Medium",technologies:[],role:"",preview_image:"",project_url:"",github_url:"",start_date:"",end_date:""}),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(""),[m,g]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(null==t?void 0:t.preview_image)&&h(t.preview_image)},[t]);let p=async e=>{e.preventDefault(),g(!0);try{let e={...i};if(c){console.log("Starting image upload...");try{let t=await n.Ue.uploadProjectImage(c);console.log("Image uploaded successfully:",t),e.preview_image=t}catch(t){console.error("Image upload failed:",t);let e=t instanceof Error?t.message:"Unknown upload error";throw Error("Image upload failed: ".concat(e))}}console.log("Attempting to save project:",e),await r(e),console.log("Project save completed successfully")}catch(r){console.error("Error in form submission:",r);let e=r instanceof Error?r.message:"Unknown error occurred",t="Failed to save project";e.includes("Authentication required")?t="Authentication Error: Please make sure you're logged in as admin":e.includes("violates row-level security")?t="Database Security Error: RLS policies may not be properly configured":e.includes("Image upload failed")?t="Image Upload Error":e.includes("duplicate key")?t="Duplicate Entry Error: A project with this name may already exist":e.includes("null value")&&(t="Missing Required Field Error: Please check all required fields are filled"),alert("".concat(t,"\n\nDetailed Error: ").concat(e,"\n\nTip: Check the browser console for more technical details."))}finally{g(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-gray-900 p-8 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:t?"Edit Project":"Add Project"}),(0,a.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Name"}),(0,a.jsx)("input",{type:"text",required:!0,value:i.name,onChange:e=>o({...i,name:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Description"}),(0,a.jsx)("textarea",{required:!0,rows:3,value:i.description,onChange:e=>o({...i,description:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Preview Image"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&(d(r),h(URL.createObjectURL(r)))},className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600"}),u&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:u,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border border-white/20"}),(0,a.jsx)("button",{type:"button",onClick:()=>{d(null),h(""),o({...i,preview_image:""})},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600",children:"✕"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Project URL"}),(0,a.jsx)("input",{type:"url",value:i.project_url||"",onChange:e=>o({...i,project_url:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3",placeholder:"https://your-project.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"GitHub URL"}),(0,a.jsx)("input",{type:"url",value:i.github_url||"",onChange:e=>o({...i,github_url:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3",placeholder:"https://github.com/username/repo"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Status"}),(0,a.jsxs)("select",{value:i.status,onChange:e=>o({...i,status:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3",children:[(0,a.jsx)("option",{value:"Planning",children:"Planning"}),(0,a.jsx)("option",{value:"In Progress",children:"In Progress"}),(0,a.jsx)("option",{value:"Completed",children:"Completed"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Priority"}),(0,a.jsxs)("select",{value:i.priority,onChange:e=>o({...i,priority:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3",children:[(0,a.jsx)("option",{value:"Low",children:"Low"}),(0,a.jsx)("option",{value:"Medium",children:"Medium"}),(0,a.jsx)("option",{value:"High",children:"High"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Technologies (comma-separated)"}),(0,a.jsx)("input",{type:"text",value:i.technologies.join(", "),onChange:e=>o({...i,technologies:e.target.value.split(",").map(e=>e.trim())}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3",placeholder:"React, Node.js, PostgreSQL"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Role"}),(0,a.jsx)("input",{type:"text",required:!0,value:i.role,onChange:e=>o({...i,role:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3",placeholder:"Full Stack Developer"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:i.start_date||"",onChange:e=>o({...i,start_date:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-white font-medium mb-2",children:"End Date"}),(0,a.jsx)("input",{type:"date",value:i.end_date||"",onChange:e=>o({...i,end_date:e.target.value}),className:"w-full bg-white/10 border border-white/20 text-white rounded-lg px-4 py-3"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,a.jsx)("button",{type:"submit",disabled:m,className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Saving...":"Save Project"}),(0,a.jsx)("button",{type:"button",onClick:l,disabled:m,className:"bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition-all font-semibold disabled:opacity-50",children:"Cancel"})]})]})]})})}}},function(e){e.O(0,[10,664,805,774,888,179],function(){return e(e.s=8419)}),_N_E=e.O()}]);